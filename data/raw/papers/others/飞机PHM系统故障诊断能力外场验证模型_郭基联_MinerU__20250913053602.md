# 飞机PHM系统故障诊断能力外场验证模型

郭基联，邵帅，虞健飞（1. 空军工程大学航空航天工程学院，西安，710038；2. 空军装备研究院，北京，100076）

摘要针对目前先进飞机的预测与健康管理系统（PHM）投入使用后尚缺乏系统的外场验证和评价技术手段，提出了基于先验信息的PHM诊断能力外场评估和验证方法。首先利用飞机研制、试验期间PHM系统积累的各LRU（外场可更换单元）的诊断信息，确定LRU和系统的诊断能力指标先验估计值，再利用外场数据对先验分布进行修正，形成后验分布，最后利用后验分布得到系统/分系统的PHM诊断能力参数后验估计值。通过以典型测试性参数以故障检测率和故障隔离率进行实例分析，得到了不同置信度下故障检测率和故障隔离率的置信下限。估算结果表明该方法科学合理，实用性较强，能够满足小样本条件下外场评估的工程实际需要。

关键词故障诊断；健康管理；贝叶斯；测试性；外场验证DOI 10.3969/j.issn1009- 3516.2016.03.001中图分类号V37；V240.2 文献标志码A 文章编号1009- 3516(2016)03- 0001- 05

# Research on Field Verify Model of Fault Diagnosis Ability in Aircraft PHM System

GUO Jilian，SHAO Shuai，YU Jianfe² (1. Aeronautics and Astronautics Engineering College，Air Force Engineering University，Xi'an 710038，China; 2. Air Force Equipment Research Institute，Beijing 100076，China)

Abstract:Aimed at the problems that at present prediction and health management are lack in field evaluate methods and technical measurements after the advanced aero planes come into service，a method to evaluate the PHM system fault diagnosis ability based on prior information is proposed. The method confirms the priori point estimate of diagnostic ability index of the LRU and system by using the diagnostic information of the LRU of a large number of equipment accumulated by the PHM working during the aero plane development and test time. Then the posterior distribution is formed by using the field data to modify the priori distribution. At last，the posterior estimate of the diagnostic ability index of the system and LRU can be obtained by the posterior distribution. With the example of percent detected and percent isolated, lower confidence limit of the percent detected and percent isolated under different confidence level are obtained. The result indicates that the method is scientific and reasonable，practical，and can meet the needs of field evaluation under the condition of small model.

Key words: fault diagnosis; health management; Bayesian; testability; field verify

预测与健康管理系统（Prognostics and Health Management，PHM）是飞机实现自主式保障的核心系统之一，实现了对整机全面的故障检测、隔离、预测及状态管理，改变了维修方式[1]。目前，各种PHM系统和类PHM系统已经在国外逐步得到应用，如航天器的集成健康管理系统[2]、飞机状态监控系统[3]、发动机监控系统[4]、综合诊断预测系统[5]、海军的综合状态评估系统[6]等。F- 35飞机项目[7]首次提出了故障预测与健康管理系统概念，以实现经济可承受性、增强的综合诊断能力和虚警几乎为零的目标，促进视情维修的形成。国外对PHM系统的验证工作十分重视。美国各研究机构就PHM验证数据获取、建模与仿真与PHM系统评价3个方面开展PHM验证与评价工作[3]。国内对PHM的研究起步较晚，但随着对F- 35飞机跟踪研究不断深入，逐渐认识到自主保障模式以及PHM等关键维修保障新技术对飞机保障能力和经济可承受性带来的革命性的效果，取得了一些研究成果和应用[8- 11]。文献[12~14]对从技术上研究了武器装备故障预测及健康管理系统；文献[15]提出了一种小子样变总体下的基于Bayes理论的测试性验证方法。这些研究大都集中在PHM的实现技术领域，而对PHM系统设计要求论证、验证技术研究明显不足。

目前对外场装备的测试性评估主要问题是：一方面外场统计的样本量有限，尤其是新研制的装备，外场使用时间不足以暴露被测装备大部分故障，收集的故障样本结构不合理，影响测试性评估的可信度，容易造成较大的随机统计误差；另一方面，装备在设计、研制及定型使用阶段产生大量的先验信息（特别是系统各LRU的诊断信息）没有得到充分利用，这些信息的使用将有效改进测试性评估精度和可信度问题。

因此，针对PHM系统设计验证技术研究明显不足的问题，提出了基于先验信息的PHM诊断能力外场评估方法。

# 1 基于先验信息的PHM诊断能力外场评估方法

# 1.1 确定诊断能力指标点估计先验值

Bayes方法是基于先验信息的小子样评估方法，是解决传统PHM系统诊断能力评估方法中样本量较少、信息多源与变动总体的一种有效方法，最早应用于解决装备可靠性评估、武器装备战术技术

指标评定等方面，目前，在测试性应用领域也逐渐得到重视。

Bayes方法应用的基础是Bayes公式，其连续形式为：

$$
\pi (\theta \mid x) = \frac{L(\theta\mid x)\pi(\theta)}{L(\theta\mid x)\pi(\theta)} \tag{1}
$$

式中：  $\theta$  为要进行统计推断的参数；  $\Theta$  为  $\theta$  的取值范围；  $\mathcal{X}$  为样本观测值；  $L(\theta \mid x)$  为似然函数；  $\pi (\theta)$  为  $\theta$  的先验分布密度函数。

Bayes公式离散形式为：

$$
\pi (\theta_{i}\mid x) = \frac{L(\theta_{i}\mid x)P(\theta_{i})}{\sum_{i}L(\theta_{i}\mid x)P(\theta_{i})} \tag{2}
$$

式中：  $\theta_{i}$  为进行统计推断的参数  $\theta$  的可能取值； $P(\theta_{i})$  为  $\theta$  取值为  $\theta_{i}$  的先验概率。

确定先验值是利用外场使用数据对某系统/分系统进行诊断能力指标的点估计，即由各LRU诊断能力信息确定系统级诊断能力指标先验值。

在装备使用初期，一般很难获得较多系统诊断能力信息，但研制、试验过程中PHM工作往往会积累较多的系统各LRU的诊断信息，利用这些信息可推算得到系统诊断能力信息的先验值。该方法分为2个步骤。

Step1LRU诊断能力指标的点估计

以飞机PHM诊断能力要求中的典型指标故障检测率（Fault Detection Rate，FDR）/故障隔离率（Fault Isolation Rate，FIR）为例。假设对第i个可更换单元（LRU）：注入  $n_i$  个故障样本，检测/隔离失败次数为  $f_{i}$ ，则  $\mathrm{LRU}_i$  故障检测率/故障隔离率的成功率为：

$$
q_{i} = n_{i} - f_{i} / n_{i} \tag{3}
$$

Step2系统诊断能力信息的计算。

根据系统  $\mathrm{FDR}_s / \mathrm{FIR}_s$  与各LRU的  $\mathrm{FDR}_i / \mathrm{FIR}_i$  关系[18]得：

$$
\mathrm{FDR}_s = \frac{\sum_{i = 1}^{m}\lambda_i\mathrm{FDR}_i}{\sum_{i = 1}^{m}\lambda_i},\mathrm{FIR}_s = \frac{\sum_{i = 1}^{m}\lambda_i\mathrm{FIR}_i}{\sum_{i = 1}^{m}\lambda_i} \tag{4}
$$

式中：  $m$  为可更换单元数量，  $\lambda_{i}$  为  $\mathrm{LRU}_i$  的故障率。则FDR或FIR的点估计值可作为先验均值，即：

$$
E(q_{s}) = \sum_{i = 1}^{m}\lambda_{i}q_{i} / \sum_{i = 1}^{m}\lambda_{i} \tag{5}
$$

式中：  $q_{i}$  为  $\mathrm{LRU}_i$  的FDR或FIR。

根据方差定义，系统FDR或FIR的先验方差可计算为：

$$
\mathrm{VAR}(q_s) = \frac{1}{n - 1}\sum_{i = 1}^{m}(q_s - E(q_i))^2 \tag{6}
$$

式中：  $n$  是故障样本总数，  $E(q_{s})$  是FDR或FIR的数学期望，即均值。

# 1.2 确定先验分布

确定了系统FDR/FIR的先验均值和先验方差后，就可以根据Bayes方法确定系统诊断能力参数的先验分布。在Bayes方法中，最常用的先验分布为共轭分布，即先验分布与后验分布具有相同的函数形式。先验分布中所含的未知参数称为超参数。对超参数的确定通常有工程意义法、矩等效法、信息量法、最大熵法、Bootstrap法等。

通常认为FDR/FIR服从二项分布，总体分布为二项分布的共轭先验分布是Beta分布。因此，可选取  $\beta (\alpha_0,\beta_0)$  作为FDR/FIR的先验分布，先验分布密度函数为：

$$
f(q;\alpha_0,\beta_0) = \frac{\Gamma(\alpha_0 + \beta_0)}{\Gamma(\alpha_0)\Gamma(\beta_0)} q^{\alpha_0 - 1}(1 - q)^{\beta_0 - 1} \tag{7}
$$

式中：  $\alpha_{0},\beta_{0}$  即为待确定的超参数，  $q$  为待评估的参数。由先验信息获得  $q$  的先验均值  $\hat{q}_{0}$  和先验方差 $\hat{\sigma}_{0}^{2}$  ，再根据矩等效法，令这2个参数分别等于Beta分布的期望和方差（一阶矩、二阶矩），即：

$$
\left\{ \begin{array}{l}\frac{\alpha_0(\alpha_0 + \beta_0) = \hat{q}_0}{\alpha_0\beta_0}\\ \displaystyle (\alpha_0 + \beta_0)^2 (\alpha_0 + \beta_0 + 1) = \hat{\sigma}_0^2 \end{array} \right. \tag{8}
$$

求解可得先验分布的超参数  $\alpha_{0},\beta_{0}$

# 1.3 似然函数与后验分布确定

根据外场统计数据，采用最大似然估计，得到似然函数，然后再通过与先验分布进行融合，得到待评估参数的后验分布。

在二项分布条件下，假定  $q$  为评估参数，  $n$  为现场试验样本量，  $f$  为故障检测/隔离失败次数，则关于待评估参数的似然函数为：

$$
L(q\mid f) = q^{n - f}(1 - q)^{f} \tag{9}
$$

考虑先验分布为Beta分布  $\beta (\alpha_0,\beta_0)$  ，由Bayes公式确定  $q$  的后验分布为：

$$
\pi (q\mid f) = \frac{q^{n - f}(1 - q)^{f}\beta(\alpha_{0},\beta_{0})}{\int_{0}^{1}q^{n - f}(1 - q)^{f}\beta(\alpha_{0},\beta_{0})\mathrm{d}q} = \tag{10}
$$

$$
\frac{q^{n - f}(1 - q)^{f}\frac{\Gamma(\alpha_{0} + \beta_{0})}{\Gamma(\alpha_{0})\Gamma(\beta_{0})}q^{\alpha_{0} - 1}(1 - q)^{\beta_{0} - 1}}{\int_{0}^{1}q^{n - f}(1 - q)^{f}\frac{\Gamma(\alpha_{0} + \beta_{0})}{\Gamma(\alpha_{0})\Gamma(\beta_{0})}q^{\alpha_{0} - 1}(1 - q)^{\beta_{0} - 1}\mathrm{d}q} = \tag{10}
$$

$$
\beta (\alpha_{0} + n - f,\beta_{0} + f)
$$

即后验分布为参数  $\alpha_{0} + n - f,\beta_{0} + f$  的Beta分布。根据Beta分布均值和方差计算方法，后验分布

# 的均值和方差为：

$$
\left\{ \begin{array}{c}{U_s = (\alpha_0 + n - f) / (\alpha_0 + \beta_0 + n)}\\ {\mathrm{VAR}_s = \frac{(\alpha_0 + n - f)(\beta_0 + f)}{(\alpha_0 + \beta_0 + n)^2(\alpha_0 + \beta_0 + n + 1)}} \end{array} \right. \tag{11}
$$

该式即为对于系统诊断能力参数FDR/FIR的数学估计。

# 2 实例分析

以某型飞机常用的测试性指标故障检测率、故障隔离率为例，分析基于先验信息的PHM诊断能力外场评估方法。已知该飞机某系统现场试验样本量  $n = 26$  ，故障检测失败次数  $f_{0} = 2$  ，故障隔离失败次数  $f_{1} = 1$  。该系统的故障检测率设计指标为 $90\%$  、故障隔离率设计指标为  $92\%$  。

使用传统统计方法计算故障检测率：

$$
\mathrm{FDR}_s = \frac{n_0 - f_0}{n_0} = \frac{24}{26} = 0.9231 > 0.90
$$

故障隔离率：

$$
\mathrm{FIR}_s = \frac{n_0 - f_0 - f_1}{n_0 - f_0} = \frac{23}{24} = 0.9589 > 0.92
$$

从上述计算过程可知，系统的故障检测率与故障隔离率的计算结果都大于设计指标，验证通过。但该方法的适合条件要求试验样本量  $n\geq 50$  ，不能直接用于本例的小样本情况。

利用基于先验信息的PHM诊断能力外场评估方法判断系统的PHM是否符合设计指标要求。计算过程主要分为3个步骤：

# Step1 确定点估计先验值

该系统主要由10个LRU组成，每个LRU的故障率、故障样本、故障检测成功次数和故障隔离成功次数见表1。

表1PHM系统先验初始值估计结果

Tab.1 Evaluation result of prior initial value in PHM system  

<table><tr><td>LRU</td><td>故障
样本</td><td>λ(10-3)</td><td>故障检测率
成功次数</td><td>q/%</td><td>故障隔离率
成功次数</td><td>q/%</td></tr><tr><td>LRU1</td><td>2</td><td>0.67</td><td>2</td><td>100</td><td>2</td><td>100</td></tr><tr><td>LRU2</td><td>3</td><td>0.83</td><td>3</td><td>100</td><td>2</td><td>67</td></tr><tr><td>LRU3</td><td>2</td><td>0.38</td><td>1</td><td>50</td><td>1</td><td>100</td></tr><tr><td>LRU4</td><td>1</td><td>0.10</td><td>1</td><td>100</td><td>1</td><td>100</td></tr><tr><td>LRU5</td><td>2</td><td>0.25</td><td>2</td><td>100</td><td>2</td><td>100</td></tr><tr><td>LRU6</td><td>3</td><td>0.22</td><td>2</td><td>67</td><td>1</td><td>50</td></tr><tr><td>LRU7</td><td>2</td><td>1.67</td><td>2</td><td>100</td><td>2</td><td>100</td></tr><tr><td>LRU8</td><td>1</td><td>0.13</td><td>1</td><td>100</td><td>1</td><td>100</td></tr><tr><td>LRU9</td><td>2</td><td>0.56</td><td>2</td><td>100</td><td>1</td><td>50</td></tr><tr><td>LRU10</td><td>3</td><td>0.33</td><td>2</td><td>67</td><td>2</td><td>100</td></tr><tr><td>合计</td><td>21</td><td>0.67</td><td>18</td><td>-</td><td>15</td><td>-</td></tr></table>

因此由式（3）可计算出每个  $\mathrm{LRU}_i$  的故障检测、隔离的成功率  $q_{i}$ ，结果参见表1相应列。

然后再根据LRU的诊断能力指标和故障率确定系统的诊断能力指标先验点估计值。该系统故障检测率的均值和方差分别为：

$$
E(\mathrm{FDR}) = \frac{\sum_{i = 1}^{m}\lambda_{i}q_{i}}{\sum_{i = 1}^{m}\lambda_{i}} = \frac{0.00476}{0.005137} = 0.926521
$$

$$
\mathrm{VAR(FDR)} = \frac{1}{n - 1}\sum_{i = 1}^{m}(q_{i} - E(q_{i}))^{2} = 0.017738
$$

其故障隔离率的均值和方差分别为：

$$
E(\mathrm{FIR}) = \frac{\sum_{i = 1}^{m}\lambda_{i}q_{i}}{\sum_{i = 1}^{m}\lambda_{i}} = \frac{0.004471}{0.00476} = 0.939248
$$

$$
\mathrm{VAR(FIR)} = \frac{1}{n - 1}\sum_{i = 1}^{m}(q_{i} - E(q_{i}))^{2} = 0.024301
$$

# Step2 确定先验分布

已知该系统的故障检测率、故障隔离率都服从二项分布，则其故障检测率的先验分布可由下述方程组求得：

$$
\left\{ \begin{array}{l}\frac{\alpha_0}{\alpha_0 + \beta_0} = \hat{q}_0 = 0.926521 \\ \frac{\alpha_0\beta_0}{(\alpha_0 + \beta_0)^2(\alpha_0 + \beta_0 + 1)} = \hat{\sigma}_0^2 = 0.017738 \end{array} \right.
$$

即  $\alpha_{0} = 199.5487$ $\beta_{0} = 15.8256$

同时，其故障隔离率的先验分布可由下述方程组求得：

$$
\left\{ \begin{array}{l}\frac{\alpha_1}{\alpha_1 + \beta_1} = \hat{q}_1 = 0.939248 \\ \frac{\alpha_1\beta_1}{(\alpha_1 + \beta_1)^2(\alpha_1 + \beta_1 + 1)} = \hat{\sigma}_1^2 = 0.024301 \end{array} \right.
$$

即  $\alpha_{1} = 89.8162$ $\beta_{1} = 5.8095$

# Step3 统计推断

有了先验分布，就可以使用贝叶斯方法进行统计推断。根据式（10）可知其后验分布为：

$$
\pi (q\mid f) = \beta (\alpha_{0} + n - f,\beta_{0} + f)
$$

1)计算故障检测率。系统现场试验样本量  $n_0 = n = 26$ ，故障检测失败次数  $f_{0} = 2$ 。故障检测率的后验分布为服从  $\beta (\alpha_{0} + n_{0} - f_{0},\beta_{0} + f_{0}) = \beta (223.54,17.82)$  的Beta分布，其均值和方差分别为：

$$
U_{0} = \frac{\alpha_{0} + n_{0} - f_{0}}{\alpha_{0} + \beta_{0} + n_{0}} = 0.9261
$$

$$
\mathrm{VAR}_0 = \frac{(\alpha_0 + n_0 - f_0)(\beta_0 + f_0)}{(\alpha_0 + \beta_0 + n_0)^2(\alpha_0 + \beta_0 + n_0 + 1)} =
$$

2.8219e- 004

2）计算故障隔离率。系统故障检测成功的样本量  $n_{1} = n_{0} - f_{0} = 21$ ，故障隔离失败次数  $f_{1} = 1$ 。故障隔离率的后验分布为服从  $\beta (\alpha_{1} + n_{1} - f_{1},\beta_{1} + f_{1}) = \beta (112.81,6.81)$  的Beta分布，其后验均值和方差分别为：

$$
U_{1} = \frac{\alpha_{1} + n_{1} - f_{1}}{\alpha_{1} + \beta_{1} + n_{1}} = 0.9431
$$

$$
\mathrm{VAR}_1 = \frac{(\alpha_1 + n_1 - f)(\beta_1 + f_1)}{(\alpha_1 + \beta_1 + n)^2(\alpha_1 + \beta_1 + n_1 + 1)} =
$$

$4.4504\mathrm{e}^{- 004}$

由此，根据Beta分布的累积分布函数，可求得各置信度下的单侧置信下限见表2。

表2 单侧置信下限

Tab.2 One- sided lower confidence limits  

<table><tr><td>置信度</td><td>FDR置信下限</td><td>FIR置信下限</td></tr><tr><td>0.95</td><td>0.896 6</td><td>0.904 6</td></tr><tr><td>0.90</td><td>0.904 0</td><td>0.914 9</td></tr><tr><td>0.80</td><td>0.912 4</td><td>0.926 3</td></tr></table>

从表中可以看出，故障检测率的单侧置信下限在置信度为0.95时小于0.90的设计要求，不能通过验证，置信度取0.9时勉强通过。故障隔离率的单侧置信下限在置信度为0.95和0.9时都小于0.92设计要求，只在置信度为0.8时才符合要求。而工程应用中，对置信度的要求一般均在0.9以上，因此可以认为，故障隔离率指标不能通过验证。

由此可见，基于先验信息的PHM诊断能力外场评估方法直观实用，具有很强的外场实际可操作性。目前，已据此方法对飞机PHM系统的6类14个基准诊断度量参数开发了外场验证程序，并在实际工程中得到了应用。

# 3 结语

本文针对目前PHM系统外场验证评估时遇到的小子样问题，提出了基于先验信息的PHM诊断能力外场评估方法。该方法利用飞机研制、试验期间PHM系统积累的各LRU的诊断信息，确定LRU和系统的诊断能力指标先验值和先验分布，再利用外场数据对先验分布进行修正，形成后验分布，最后利用后验分布得到系统/分系统的PHM诊断能力参数后验估计值。以故障检测率和故障隔离率为例，给出了详细的计算步骤和方法。实例分析表明，该方法能够有效应用于飞机PHM系统的外场验证。

# 参考文献（References）：

[1] 會声奎，Pecht Michael G，吴际.故障预测与健康管理（PHM）技术的现状与发展[J].航空学报，2005，26(5):626- 632. ZENG Shengkui，Pecht Michael G，WU Ji. Status and Perspectives of Prognostics and Health Management Technologies[J]. Acta Aeronautica ET Astro- nautica Sinica，2005，26(5):426- 632. (in Chinese)[2] Esperon- miguez M，Johnb P，Jennionsa I. A Review of Integrated Vehicle Health Management Tools for Legacy platforms: Challenges and Opportunities[J]. Progress in Aerospace Sciences,2013,56:19- 34. [3] MELITA L，GUMRAH F. Studies on Transport of Vanadium（V）and Nickel（II）from Wastewater Using Activated Composite Membranes[J]. Waste and Biomass Valorization，2010，1(4):461- 465[4] WILLIAM Inckley. Cost- Effectiveness of Helicopter vs Ground EMS[J]. Air Medical Journal，2014，33(1):13- 14. [5] LEE Kalmar C L，XUE B. Contribution of Proline to the Pre- structuring Tendency of Transient Hlical Secondary Structure Elements in Intrinsically Disordered Proteins[J]. Biochimica et Biophysica Acta (BBA)/ General Subjects，2014，1840(1):993- 1003. [6] QI S，B，HUTT D. Conventional and Microwave- assisted Processing of Cr- loaded ICAs for Electronic Interconnect Applications[J]. Journal of Materials Science，2013，48(20):7204- 7214. [7] MICHAEL Kalmanash H. Status of Development of LCOS Projection Displays for F- 22A，F/A- 18E/F，and JSF Cockpits[C]// Cockpit Displays VIII：Dis- plays for Defense Applications，USA，2001. [8] LIU Guangjun，YANG Shuming，QIU Jing，et al. ANovel Testability Model for Health Management of Heading Attitude System[J]. Chinese Journal of Aeronautics，2013，26(1):201- 238. [9] FAN Z，LIU G，SI X，et al. Degradation Data- driven Approach for Remaining Useful Life Estimation[J].

Journal of Systems Engineering and Electronics,2013，24(1)：173- 182. [10] QIU J，TAN X，LIU G，et al.Test Selection AndOptimization for PHM Based on Failure EvolutionMechanism Model[J]. Journal of Systems Engineering and Electronics，2013，24(5)：780- 792. [11] XU Jiuping，XU Lei.Health Management Based onFusion Prognostics for Avionics Systems[J]. Journalof Systems Engineering and Electronics，2011，22(3):428- 436.

[12] TAN Xiaodong，QIU Jing，LIU Guanjun，et al. A Novel Approach of Testability Modeling and Analysis for PHM Systems Based on Failure Evolution Mechanism[J]. Chinese Journal of Aeronautics，2013，26(3):766- 776.

[13] 陈少将，邱静，刘冠军，等.一种备件多级库存系统的仿真模型[J].系统仿真学报.2010，22（11）：2664- 2666. CHEN Shaojiang，QIU Jing，LIU Guanjun，et al.Optimal Model on Multistage Stock System of Spare Parts[J]. Journal of System Simulation，2010，22(11):2664- 2666. (in Chinese)

[14] 王浩，罗宏伟，陈媛.半导体级别故障预测与健康管理[J].电子产品可靠性与环境试验，2011，29（5）：58- 62. WANG Hao，LIUO Hongwei，CHEN Yuan. Review of Prognostics and Health Management on the Semiconductor- Level[J]. Electronic Product Reliability and Environmental Testing，2011，29（5）：58- 62. (in Chinese)

[15] 汤，景博，黄以锋.小子样变总体下的Bayes测试性验证方法[J].系统工程与电子技术，2014，12(36):2566- 2570.

TANG Wei，JING Bo，HUANG Yifeng.Testability Verification Method Base on Bayes Theory under Small Sample and Varying Population Circumstance[J]. Systems Engineering and Electronic，2014，12(36):2566- 2570. (in Chinese)

（编辑：徐敏）